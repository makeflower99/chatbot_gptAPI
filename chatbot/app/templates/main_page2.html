{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì½”ë”©ì„ í’€ì–´ì£¼ëŠ” ì±—ë´‡ CopleChat</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js/styles/default.min.css">
    <script src='https://cdn.plot.ly/plotly-2.31.1.min.js'></script> 
    <script src="https://cdn.jsdelivr.net/npm/highlight.js/lib/common.js"></script>
</head>
<body>
    <input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

    <div class="top-bar">
        <p id="top"><b>ğŸ¤– ì½”ë”© í’€ì–´ì£¼ëŠ” AI <span id="special-word">ì½”í’€ì±—</span> ğŸ¤–</b></p>
        <script>
            // íŠ¹ì • ë‹¨ì–´ì—ë§Œ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ëŠ” JavaScript ì½”ë“œ
            document.addEventListener('DOMContentLoaded', function() {
                var specialWord = document.getElementById('special-word');
                if (specialWord) {
                    specialWord.style.color = 'white'; // ì›í•˜ëŠ” ìƒ‰ìƒìœ¼ë¡œ ë³€ê²½
                }
                hljs.highlightAll(); // Highlight.js í™œì„±í™”
            });
            {% comment %} var specialWord = document.getElementById('special-word');
            specialWord.style.color = 'white'; // ì›í•˜ëŠ” ìƒ‰ìƒìœ¼ë¡œ ë³€ê²½ {% endcomment %}
        </script>
        <!-- í˜„ì¬ ë¡œê·¸ì¸í•œ ìœ ì € ì •ë³´ -->
        <p>USER: {{ user.username }} ë‹˜ ì•ˆë…•í•˜ì„¸ìš”. ğŸ˜Š </p>
        <!-- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
        <a href="{% url 'user:logout' %}">ë¡œê·¸ì•„ì›ƒ</a>
    </div>

    <div class="container">
        <!-- ì™¼ìª½ íŒ¨ë„ -->
        <div class="sidebar">

            <div class="level-container">
                {% load custom_filters %}
                {% for level in levels %}
                        <button class="level-btn" data-level="{{ level }}">
                            <p class="btnText">LEVEL {{level}}</p>
                            <div class="btnTwo">
                                <p class="btnText2">GO!</p>
                            </div>
                        </button>
                {% endfor %}
                        <!-- ëœë¤ ë¬¸ì œ ë³´ê¸° ë²„íŠ¼ -->
                        <button class="random-question-btn">ëœë¤ ë¬¸ì œ ìƒì„± ğŸ”€</button>
            </div>

            <div class="questions-container">
                <div class="question-text-container">
                    <!-- ì§ˆë¬¸ ìƒì„±ë˜ì–´ì„œ ë“¤ì–´ê° -->
                </div>
            </div>
    


            <!-- ì”ë”” ê¸°ëŠ¥ -->
            <div class="plotly-graph-container">
                <p> ğŸŒ± {{user.username}} ë‹˜ì˜ ì”ë””ë¥¼ ì‹¬ì–´ë´ìš”! ğŸŒ±</p>
                <!-- plotly ê·¸ë˜í”„ë¥¼ ì¶œë ¥í•  ì˜ì—­ -->
                <div id="plotly-graph" style="height:100px">
                </div>
            </div>

        </div>

        <!-- ì˜¤ë¥¸ìª½ íŒ¨ë„ -->
        <div class="chat-container">
            <div class="chat-history">
                <!-- ëŒ€í™” íˆìŠ¤í† ë¦¬ê°€ ì—¬ê¸°ì— í‘œì‹œ -->
            </div>
            <div class="user-input">
                <input type="text" class="message-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
                <button class="send-button">ì „ì†¡</button>
            </div>
        </div>

    </div>
    <script>
        // Django í…œí”Œë¦¿ì—ì„œ JavaScript ë³€ìˆ˜ë¡œ ë³€í™˜
        // const heatmapArray = {{ heatmap_array|safe }};
        const heatmapArray = JSON.parse('{{ heatmap_array|safe }}');
        // const heatmapArray = {{ heatmap_array }};
    </script>
    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>
